import{d as te,m as F,n as ae,W as O,C as ne,G as le,r as k,o as i,c as p,e as r,w as s,a as v,u as n,_ as C,f,F as x,t as I,A as w,Q as oe,b as se,B as ce,X as re,v as P,z,k as ie}from"./index-fa2eb6b4.js";import{s as de,e as ue,a as pe}from"./data-fb379dee.js";import{A as g}from"./type-1be1d189.js";import{a as fe}from"./axios-4a70c6fc.js";function ge(S,b){const c=b&&"get";return l=>new Promise((h,_)=>{fe({method:c,url:S,params:{page:l.page?l.page-1:0,size:l.pageSize}}).then(function(d){h(d.data.result)}).catch(function(d){console.log(d),_(d)})})}const me={style:{"margin-bottom":"10px"}},be={key:1},he={key:1},_e="http://127.0.0.1:8090/api/v1/read?area=QNA3E&address=D100",ye=te({__name:"sTable",setup(S){const b=[{title:"Address",dataIndex:"address",key:"address"},{title:"Value",dataIndex:"value",key:"value"}],c=F([]),l=F({copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!1});function h(e){const t=a=>!(!(e.gender&&(e.gender===1||e.gender===2))&&a.label==="Delete"),o=[{icon:"clarity:note-edit-line",label:"Edit",onClick:q.bind(null,e)},{icon:"ant-design:delete-outlined",color:"error",label:"Delete",onClick:$.bind(null,e)}];return o.forEach(a=>{a.ifShow=t}),o}function _(e){return e.map(o=>({address:o.address,value:o.value}))}const d={pageField:"page",sizeField:"pageSize",listField:"content",totalField:"totalElements"},[B,{updateTableDataRecord:M,findTableDataRecord:Ee,reload:N}]=ae({title:"PLC Simulator Example.",columns:b,api:ge(_e),afterFetch:_,fetchSetting:d,actionColumn:{title:"Actions",dataIndex:"action",fixed:void 0},useSearchForm:!1,searchFormConfig:{labelWidth:120,schemas:de,autoSubmitOnEnter:!0,submitButtonOptions:{text:"search"}}}),G={schemas:ue,colon:!0,modalProps:{okText:"I'm sure.",cancelText:"Reject"}},[V,{openModal:T,closeModal:K,setModalProps:ke,changeLoading:A,changeOkLoading:R}]=O(),L={schemas:pe,colon:!0},Q=async(e,t)=>{console.log("handleOK in outer event callback",e,t),M(t.key,e),A(!0),R(!0),R(!1),A(!1)},U=(e,t)=>{console.log("handle cancel in outer event callback",e,t)},[W,{openModal:X,closeModal:ve}]=O(),Y=(e,t)=>{console.log("handleOK2 in outer event callback",e,t),M(t.key,e),K()},j=(e,t)=>{console.log("handle cancel in outer event callback",e,t)};function q(e){console.log("edit clicked!"),console.log(e),T(!0,{title:"Edit",record:e})}function $(e){console.log("delete action clicked!"),console.log(e)}function H(){Z(0,g.CREATE)}function J(){console.log("delete",c)}const Z=(e,t,o)=>{console.log("id",e,"type",t);let a="Create";if(t==g.CREATE)a="Create";else if(t==g.COPY_CREATE)a="Copy create";else if(t==g.MODIFY)a="Modify";else throw new Error("illegal type.");const u={title:a,record:o||{}};t==g.CREATE?X(!0,u):T(!0,u)};function ee(e){console.log(e),c.value=e;const t=e.length;t<=0?l.value={copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!1}:t==1?l.value={copyEnabled:!0,createEnabled:!0,modifyEnabled:!0,deleteEnabled:!0}:l.value={copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!0}}let y=null;return ne(()=>{y=setInterval(()=>{N({reload:!1})},1e3)}),le(()=>{y&&clearInterval(y)}),(e,t)=>{const o=k("a-button"),a=k("a-alert"),u=k("a-tag");return i(),p(x,null,[r(n(re),{onRegister:n(B),rowSelection:{type:"checkbox",selectedRowKeys:c.value,onChange:ee},clickToRowSelect:!1},{headerTop:s(()=>[v("div",me,[r(n(C),{type:"primary",onClick:H,disabled:!l.value.createEnabled,class:"button-s",preIcon:"ic:baseline-plus"},{default:s(()=>[f("Add Reg")]),_:1},8,["disabled"]),r(n(C),{type:"primary",danger:"",onClick:J,disabled:!l.value.deleteEnabled,class:"button-s",preIcon:"ic:baseline-delete"},{default:s(()=>[f("Delete")]),_:1},8,["disabled"])]),r(a,{type:"info","show-icon":""},{message:s(()=>[c.value.length>0?(i(),p(x,{key:0},[v("span",null,"Selected "+I(c.value.length)+" items (pagination support.)",1),r(o,{type:"link",onClick:t[0]||(t[0]=E=>c.value=[]),size:"small"},{default:s(()=>[f("清空")]),_:1})],64)):(i(),p("span",be,"No items selected."))]),_:1})]),toolbar:s(()=>[v("div",null,[r(n(C),{type:"primary",class:"button-s"},{default:s(()=>[f(" Show details ")]),_:1})])]),bodyCell:s(({column:E,record:D})=>[E.key==="action"?(i(),w(n(oe),{key:0,actions:h(D)},null,8,["actions"])):E.key==="tags"?(i(),p("span",he,[(i(!0),p(x,null,se(D.tags,m=>(i(),w(u,{key:m,color:m==="loser"?"volcano":m.length>5?"geekblue":"green"},{default:s(()=>[f(I(m.toUpperCase()),1)]),_:2},1032,["color"]))),128))])):ce("",!0)]),_:1},8,["onRegister","rowSelection"]),r(n(z),P({onRegister:n(V)},G,{onOk:Q,onCancel:U}),null,16,["onRegister"]),r(n(z),P({onRegister:n(W)},L,{onOk:Y,onCancel:j}),null,16,["onRegister"])],64)}}});const Te=ie(ye,[["__scopeId","data-v-45632ed5"]]);export{Te as default};
