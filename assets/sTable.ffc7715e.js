import{d as te,k as A,z as ae,q as M,A as le,C as ne,r as h,o as c,c as u,e as s,w as o,a as _,u as l,D as y,f,F as E,t as T,x as D,V as oe,b as se,y as ce,B as re,m as F,L as R,_ as ie}from"./index.fd0d4c27.js";import{s as de,e as ue,a as fe}from"./data.096d4d14.js";import{c as pe,A as p}from"./axiosFetch.003ed8b7.js";const be={style:{"margin-bottom":"10px"}},ge={key:1},me={key:1},he=te({__name:"sTable",setup(_e){const z="http://127.0.0.1:8090/api/v1/read?area=QNA3E&address=D100",O=[{title:"Address",dataIndex:"address",key:"address"},{title:"Value",dataIndex:"value",key:"value"}],r=A([]),i=A({copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!1});function I(e){const t=a=>!(!(e.gender&&(e.gender===1||e.gender===2))&&a.label==="Delete"),n=[{icon:"clarity:note-edit-line",label:"Edit",onClick:G.bind(null,e)},{icon:"ant-design:delete-outlined",color:"error",label:"Delete",onClick:H.bind(null,e)}];return n.forEach(a=>{a.ifShow=t}),n}function w(e){return e.map(n=>({address:n.address,value:n.value}))}const B={pageField:"page",sizeField:"pageSize",listField:"content",totalField:"totalElements"},[P,{updateTableDataRecord:k,findTableDataRecord:ye,reload:V}]=ae({title:"PLC Simulator Example.",columns:O,api:pe(z),afterFetch:w,fetchSetting:B,actionColumn:{title:"Actions",dataIndex:"action",fixed:void 0},useSearchForm:!1,searchFormConfig:{labelWidth:120,schemas:de,autoSubmitOnEnter:!0,submitButtonOptions:{text:"search"}}}),L={schemas:ue,colon:!0,modalProps:{okText:"I'm sure.",cancelText:"Reject"}},[N,{openModal:v,closeModal:K,setModalProps:Ee,changeLoading:C,changeOkLoading:x}]=M(),U={schemas:fe,colon:!0},Y=async(e,t)=>{console.log("handleOK in outer event callback",e,t),k(t.key,e),C(!0),x(!0),x(!1),C(!1)},j=(e,t)=>{console.log("handle cancel in outer event callback",e,t)},[q,{openModal:Q,closeModal:ke}]=M(),W=(e,t)=>{console.log("handleOK2 in outer event callback",e,t),k(t.key,e),K()},$=(e,t)=>{console.log("handle cancel in outer event callback",e,t)};function G(e){console.log("edit clicked!"),console.log(e),v(!0,{title:"Edit",record:e})}function H(e){console.log("delete action clicked!"),console.log(e)}function J(){Z(0,p.CREATE)}function X(){console.log("delete",r)}const Z=(e,t,n)=>{console.log("id",e,"type",t);let a="Create";if(t==p.CREATE)a="Create";else if(t==p.COPY_CREATE)a="Copy create";else if(t==p.MODIFY)a="Modify";else throw new Error("illegal type.");const d={title:a,record:n||{}};t==p.CREATE?Q(!0,d):v(!0,d)};function ee(e){console.log(e),r.value=e;const t=e.length;t<=0?i.value={copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!1}:t==1?i.value={copyEnabled:!0,createEnabled:!0,modifyEnabled:!0,deleteEnabled:!0}:i.value={copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!0}}let g=null;return le(()=>{g=setInterval(()=>{V({reload:!1})},1e3)}),ne(()=>{g&&clearInterval(g)}),(e,t)=>{const n=h("a-button"),a=h("a-alert"),d=h("a-tag");return c(),u(E,null,[s(l(re),{onRegister:l(P),rowSelection:{type:"checkbox",selectedRowKeys:r.value,onChange:ee},clickToRowSelect:!1},{headerTop:o(()=>[_("div",be,[s(l(y),{type:"primary",onClick:J,disabled:!i.value.createEnabled,class:"button-s",preIcon:"ic:baseline-plus"},{default:o(()=>[f("Add Reg")]),_:1},8,["disabled"]),s(l(y),{type:"primary",danger:"",onClick:X,disabled:!i.value.deleteEnabled,class:"button-s",preIcon:"ic:baseline-delete"},{default:o(()=>[f("Delete")]),_:1},8,["disabled"])]),s(a,{type:"info","show-icon":""},{message:o(()=>[r.value.length>0?(c(),u(E,{key:0},[_("span",null,"Selected "+T(r.value.length)+" items (pagination support.)",1),s(n,{type:"link",onClick:t[0]||(t[0]=m=>r.value=[]),size:"small"},{default:o(()=>[f("\u6E05\u7A7A")]),_:1})],64)):(c(),u("span",ge,"No items selected."))]),_:1})]),toolbar:o(()=>[_("div",null,[s(l(y),{type:"primary",class:"button-s"},{default:o(()=>[f(" Show details ")]),_:1})])]),bodyCell:o(({column:m,record:S})=>[m.key==="action"?(c(),D(l(oe),{key:0,actions:I(S)},null,8,["actions"])):m.key==="tags"?(c(),u("span",me,[(c(!0),u(E,null,se(S.tags,b=>(c(),D(d,{key:b,color:b==="loser"?"volcano":b.length>5?"geekblue":"green"},{default:o(()=>[f(T(b.toUpperCase()),1)]),_:2},1032,["color"]))),128))])):ce("",!0)]),_:1},8,["onRegister","rowSelection"]),s(l(R),F({onRegister:l(N)},L,{onOk:Y,onCancel:j}),null,16,["onRegister"]),s(l(R),F({onRegister:l(q)},U,{onOk:W,onCancel:$}),null,16,["onRegister"])],64)}}});const Se=ie(he,[["__scopeId","data-v-f62f39a8"]]);export{Se as default};
