import{d as ne,k as D,z as le,q as w,r as _,o as r,c as b,e as c,w as a,a as k,u as l,D as g,f as d,F as E,t as O,x as R,V as ae,b as se,y as ce,B as ie,m as A,L as F,_ as re}from"./index-da41df37.js";import{c as de,d as ue,s as pe,e as fe,a as be}from"./data-467f077b.js";import{A as u}from"./type-1be1d189.js";const ge=C=>new Promise(n=>setTimeout(n,C*1e3)),me={style:{"margin-bottom":"10px"}},he={key:1},ye={key:1},_e=ne({__name:"index",setup(C){const n=D([]),i=D({copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!1});function z(e){const t=s=>!(!(e.gender&&(e.gender===1||e.gender===2))&&s.label==="Delete"),o=[{icon:"clarity:note-edit-line",label:"Edit",onClick:H.bind(null,e)},{icon:"ant-design:delete-outlined",color:"error",label:"Delete",popConfirm:{title:"Are you sure to delete?",okText:"Yes",cancelText:"No",placement:"left",confirm:J.bind(null,e)}},{icon:"ic:baseline-api",label:"Detail",onClick:ee.bind(null,e)}];return o.forEach(s=>{s.ifShow=t}),o}function I(e){const t=e.map(o=>({key:o.articleid,name:o.title,age:o.id,email:o.space,address:o.desc.substring(0,10),tags:[o.tags],gender:1}));return console.log(t),t}const N={pageField:"page",sizeField:"pageSize",listField:"content",totalField:"totalElements"},[P,{updateTableDataRecord:v,deleteTableDataRecord:ke,findTableDataRecord:x}]=le({title:"NantaTable Usage Example.",columns:de,dataSource:ue,afterFetch:I,fetchSetting:N,actionColumn:{title:"Actions",dataIndex:"action",fixed:void 0},useSearchForm:!0,searchFormConfig:{labelWidth:120,schemas:pe,autoSubmitOnEnter:!0,submitButtonOptions:{text:"search"}},pagination:{showTotal:e=>`Now total count is ${e}.`}}),B={schemas:fe,colon:!0,modalProps:{okText:"I'm sure.",cancelText:"Reject"}},[V,{openModal:M,closeModal:L,setModalProps:Ee,changeLoading:T,changeOkLoading:S}]=w(),Y={schemas:be,colon:!0},K=async(e,t)=>{console.log("handleOK in outer event callback",e,t),v(t.key,e),T(!0),S(!0),await ge(3),S(!1),T(!1)},U=(e,t)=>{console.log("handle cancel in outer event callback",e,t)},[$,{openModal:j,closeModal:Ce}]=w(),q=(e,t)=>{console.log("handleOK2 in outer event callback",e,t),v(t.key,e),L()},W=(e,t)=>{console.log("handle cancel in outer event callback",e,t)};function G(e){console.log("hand more clicked!",e)}function H(e){console.log("edit clicked!"),console.log(e),M(!0,{title:"Edit",record:e})}function J(e){console.log("delete action clicked!"),console.log(e)}function Q(){if(console.log("copycreate"),n.value.length>0){const e=n.value[0],t=x(e);h(e,u.COPY_CREATE,t)}}function X(){h(0,u.CREATE)}function Z(){if(console.log("modify"),n.value.length>0){const e=n.value[0],t=x(e);h(e,u.MODIFY,t)}}function ee(e){console.log("handle others",e)}function te(){console.log("delete",n)}const h=(e,t,o)=>{console.log("id",e,"type",t);let s="Create";if(t==u.CREATE)s="Create";else if(t==u.COPY_CREATE)s="Copy create";else if(t==u.MODIFY)s="Modify";else throw new Error("illegal type.");const p={title:s,record:o||{}};t==u.CREATE?j(!0,p):M(!0,p)};function oe(e){console.log(e),n.value=e;const t=e.length;t<=0?i.value={copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!1}:t==1?i.value={copyEnabled:!0,createEnabled:!0,modifyEnabled:!0,deleteEnabled:!0}:i.value={copyEnabled:!1,createEnabled:!0,modifyEnabled:!1,deleteEnabled:!0}}return(e,t)=>{const o=_("a-button"),s=_("a-alert"),p=_("a-tag");return r(),b(E,null,[c(l(ie),{onRegister:l(P),rowSelection:{type:"checkbox",selectedRowKeys:n.value,onChange:oe},clickToRowSelect:!1},{headerTop:a(()=>[k("div",me,[c(l(g),{type:"primary",onClick:Q,disabled:!i.value.copyEnabled,class:"button-s",preIcon:"ic:baseline-content-copy"},{default:a(()=>[d("Copy create")]),_:1},8,["disabled"]),c(l(g),{type:"primary",onClick:X,disabled:!i.value.createEnabled,class:"button-s",preIcon:"ic:baseline-plus"},{default:a(()=>[d("Create new")]),_:1},8,["disabled"]),c(l(g),{color:"success",type:"primary",onClick:Z,disabled:!i.value.modifyEnabled,class:"button-s",preIcon:"ic:baseline-edit"},{default:a(()=>[d("Modify")]),_:1},8,["disabled"]),c(l(g),{type:"primary",danger:"",onClick:te,disabled:!i.value.deleteEnabled,class:"button-s",preIcon:"ic:baseline-delete"},{default:a(()=>[d("Delete")]),_:1},8,["disabled"])]),c(s,{type:"info","show-icon":""},{message:a(()=>[n.value.length>0?(r(),b(E,{key:0},[k("span",null,"Selected "+O(n.value.length)+" items (pagination support.)",1),c(o,{type:"link",onClick:t[0]||(t[0]=y=>n.value=[]),size:"small"},{default:a(()=>[d("清空")]),_:1})],64)):(r(),b("span",he,"No items selected."))]),_:1})]),toolbar:a(()=>[k("div",null,[c(l(g),{type:"primary",class:"button-s"},{default:a(()=>[d(" Show details ")]),_:1})])]),bodyCell:a(({column:y,record:m})=>[y.key==="action"?(r(),R(l(ae),{key:0,actions:z(m),dropDownActions:[{label:"More",popConfirm:{title:"has more ?",confirm:G.bind(null,m)},ifShow:f=>m.status!=="enable"}]},null,8,["actions","dropDownActions"])):y.key==="tags"?(r(),b("span",ye,[(r(!0),b(E,null,se(m.tags,f=>(r(),R(p,{key:f,color:f==="loser"?"volcano":f.length>5?"geekblue":"green"},{default:a(()=>[d(O(f.toUpperCase()),1)]),_:2},1032,["color"]))),128))])):ce("",!0)]),_:1},8,["onRegister","rowSelection"]),c(l(F),A({onRegister:l(V)},B,{onOk:K,onCancel:U}),null,16,["onRegister"]),c(l(F),A({onRegister:l($)},Y,{onOk:q,onCancel:W}),null,16,["onRegister"])],64)}}});const Te=re(_e,[["__scopeId","data-v-108421df"]]);export{Te as default};
